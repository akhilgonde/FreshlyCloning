<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="stylesheet" href="checkout.css">
</head>

<body>
    <!-- navbar start -->
    <div id="upper">
        <a href="index.html"><img id="first_img"
            src="https://assets-global.website-files.com/5d03b4e130118314af624b20/5fc4feea074f5b86a6c62285_freshly-logo-R.svg" /></a>
        <a ><img id="second_img" style="margin-left: 20px"
            src="https://assets-global.website-files.com/5d03b4e130118314af624b20/5f7b2e54745410836cfa3955_bizlogo_main-07.svg" /></a>
      </div> 
    
      <!-- ---------------------------------------------- -->
    
      <div id="navbar">
        <div id="nav_i">
          <a href="index.html"><img id="nav_img"
              src="https://assets-global.website-files.com/5d03b4e130118314af624b20/5fc4feea074f5b86a6c62285_freshly-logo-R.svg" /></a>
        </div>
        <div id="nav_a">
          <div>
            <a href="plans and menu.html">Plans & Menu</a>
          </div>
          <div>
            <a href="how_it_works.html">How it Works</a>
          </div>
          <div><a href="Gifts.html">Gifts</a></div>
          <div>
            <a href="">Refer a Friend</a>
          </div>
          <div><a href="help.html">Help</a></div>
        </div>
        <div id="nav_log">
          <div id="nav_log1">
            <a href="login.html">Login</a>
          </div>
          <div id="nav_log2"><a href="signUp.html"><button>Sign Up</button></a></div>
        </div>
      </div>
    <!-- nav bar ends -->

    <div id="main">

        <div>

            <div id="left">
                <h2>Checkout</h2>
                <div>
                    <h3 id="delhead">Delivery Address</h3>
                    <form id="form">
                        <p id="firstname">First Name</p>
                        <p id="lastname">Last Name</p>
                        <br>
                        <input id="ifirstname" type="text">
                        <input id="ilastname" type="text">
                        <p id="fullname">Full Name for Delivery Address</p>
                        <input id="ifullname" type="text">
                        <p id="addLine1">Address Line 1</p>
                        <input id="iaddLine1" type="text">
                        <p id="addLine2">Address Line 2 (Optional)</p>
                        <input id="iaddLine2" type="text">
                        <p id="state">State</p>
                        <select id="istate" class="form-control">
                            <option value="0">Select State </option>
                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                            <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                            <option value="Assam">Assam</option>
                            <option value="Bihar">Bihar</option>
                            <option value="Chandigarh">Chandigarh</option>
                            <option value="Chhattisgarh">Chhattisgarh</option>
                            <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                            <option value="Daman and Diu">Daman and Diu</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Lakshadweep">Lakshadweep</option>
                            <option value="Puducherry">Puducherry</option>
                            <option value="Goa">Goa</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Haryana">Haryana</option>
                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                            <option value="Jharkhand">Jharkhand</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Kerala">Kerala</option>
                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Manipur">Manipur</option>
                            <option value="Meghalaya">Meghalaya</option>
                            <option value="Mizoram">Mizoram</option>
                            <option value="Nagaland">Nagaland</option>
                            <option value="Odisha">Odisha</option>
                            <option value="Punjab">Punjab</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Sikkim">Sikkim</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Telangana">Telangana</option>
                            <option value="Tripura">Tripura</option>
                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                            <option value="Uttarakhand">Uttarakhand</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                        <p id="pin">Pin</p>
                        <input id="ipin" type="text">
                        <p id="city">City</p>
                        <input id="icity" type="text">
                        <p id="phone">Phone</p>
                        <input id="iphone" type="text">
                        <p id="emeil"> Email (We require your email to send you receipts and order updates)</p>
                        <input type="email" id="iemeil">
                        <div id="fortotal">
                            <p>Total</p>
                            <p id="gettotal"> 0 </p>
                        </div>
                        <input id="submit" type="submit" value="Next">


                    </form>
                </div>

            </div>





            <div id="right">
                <h2>Order Summary</h2>
                <div>
                    <div class="promot"><input placeholder="Promo Code" id="promot" type="text">
                        <input type="button" value="Apply" onclick="promo()">
                    </div>
                    <div>
                        <p>Delivery Date</p>
                        <!-- <p id="deldat">--/---</p> -->
                        <input type="date" placeholder="dd/mm/yy" id="datesel" onChange="dateC()">
                    </div>

                    <div>
                        <p>Meals Price </p>
                        <p id="cartprice"> 00</p>
                    </div>
                    <div>
                        <p>Shipping Charges</p>
                        <p>5</p>
                    </div>
                    <div>
                        <p>Total</p>
                        <p id="total"> 00</p>
                    </div>

                </div>
                <div id="right2">


                </div>


            </div>
        </div>
    </div>
    </div>

</body>

</html>
<script>
    var pinval = document.querySelector("#ipin").addEventListener("blur", function () {
        getpindata()
    });

    function getpindata() {
        var pinval = document.querySelector("#ipin").value;
        switch (pinval) {
            case "411028":
                document.querySelector("#icity").value = "Hadapsar,Pune";
                break;
            case "560004":
                document.querySelector("#icity").value = "Mavalli,Bengaluru";
                break;
            case "411004":
                document.querySelector("#icity").value = "F C road,Pune";
                break;
            case "411005":
                document.querySelector("#icity").value = "Shivajinagar,Pune";
                break;
            case "411042":
                document.querySelector("#icity").value = "Swargate,Pune";
                break;
            case "403001":
                document.querySelector("#icity").value = "Altinho,Panaji";
                break;
            default:
                document.querySelector("#icity").value = ""
        }
    };
    document.querySelector("#ilastname").addEventListener("blur", function () {
        getfullname()
    });
    function getfullname() {
        var fname = document.querySelector("#ifirstname").value;
        var lname = document.querySelector("#ilastname").value;
        document.querySelector("#ifullname").value = fname + " " + lname;
    }


    var prar = JSON.parse(localStorage.getItem("pricecarry")) || [0];
    console.log(prar)
    prar.map(function (elem) {
        document.querySelector("#cartprice").textContent = "$" + Math.ceil(elem.key1);


        // document.querySelector("#total").textContent = document.querySelector("#cartprice").textContent  || 0;

        // if(document.querySelector("#cartprice").textContent >1){
        // document.querySelector("#total").textContent = 0;
        document.querySelector("#total").textContent = "$" + Math.ceil(elem.key1 + 5) || 0
        // }
        // else {
        //     // document.querySelector("#total").textContent = "$"+Math.ceil(elem.key1)
        //     document.querySelector("#total").textContent = 00;
        // }

    })
    document.querySelector("#gettotal").textContent = document.querySelector("#total").textContent;
    document.querySelector("#submit").addEventListener("click", function () {
        validatechkout(event);
    })
    var fnm = document.querySelector("#ifirstname").value;
    function validatechkout(event) {

        event.preventDefault();
        var fnm = document.querySelector("#ifirstname").value;
        var lnm = document.querySelector("#ilastname").value;
        var funm = document.querySelector("#ifullname").value;
        var ad1 = document.querySelector("#iaddLine1").value;
        var ad2 = document.querySelector("#iaddLine2").value;
        var ssel = document.querySelector("#istate").value;
        var epin = document.querySelector("#ipin").value;
        var ecity = document.querySelector("#icity").value;
        var ephn = document.querySelector("#iphone").value;
        var eml = document.querySelector("#iemeil").value;
        var ttcfd = document.querySelector("#total").textContent;
        
        if (fnm.length < 1 || lnm.length < 1 || funm.length < 1 || ad1.length < 1 || ad2.length < 1 || ssel.length < 1 || epin.length < 1 || ecity.length < 1 || ephn.length < 1 || eml.length < 1) {
            alert("all feild are cumpulsary")
        }
        else {
            arr = [];
            obj = {
                fname: fnm,
                lname: lnm,
                fulname: funm,
                adres1: ad1,
                adres2: ad2,
                selstate: ssel,
                pin: epin,
                city: ecity,
                phonenum: ephn,
                emeil: eml,
                total: ttcfd,
                dDate : dDate
            }
            arr.push(obj)
            // console.log(obj)
            // console.log(arr)
            localStorage.setItem("chkdata", JSON.stringify(arr));
            window.location.href = "payment.html";
        }
    }

    function promo(event)
    {

        if(document.getElementById("promot").value =="freshly")
        {
            prar.map(function (elem) {

        document.querySelector("#cartprice").textContent = "$" + Math.ceil(elem.key1);


        // document.querySelector("#total").textContent = document.querySelector("#cartprice").textContent  || 0;

        // if(document.querySelector("#cartprice").textContent >1){
        // document.querySelector("#total").textContent = 0;
        document.querySelector("#total").textContent = "$" + Math.ceil(0.70*(elem.key1 + 5)) || 0
        // }
        // else {
        //     // document.querySelector("#total").textContent = "$"+Math.ceil(elem.key1)
        //     document.querySelector("#total").textContent = 00;
        // }
        document.querySelector("#gettotal").textContent = document.querySelector("#total").textContent;
        validatechkout(event);
        // localStorage.setItem("chkdata", JSON.stringify(arr));
    })
        }
    }
  
    function dateC()
       {
       var dDate = document.getElementById("datesel").value;
       localStorage.setItem("dDate", JSON.stringify(dDate));
       };
    

</script>